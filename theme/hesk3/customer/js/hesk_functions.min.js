HESK_FUNCTIONS||(HESK_FUNCTIONS={});var HESK_FUNCTIONS,heskKBfailed=!1,heskKBquery="";function outputAttachmentIdHolder(e,t){$("#attachment-holder-"+t).append('<input type="hidden" name="attachments[]" value="'+e+'">')}function removeAttachment(e,t,n){$('input[name="attachments[]"][value="'+t+'"]').remove(),$.ajax({url:(n?"../":"")+"upload_attachment.php?action=delete&fileKey="+encodeURIComponent(t),method:"GET"})}function hesk_showLoadingMessage(e){document.getElementById("loading-overlay").style.display="block",document.getElementById(e).disabled=!0}function hesk_loadNoResultsSelectizePlugin(e){Selectize.define("no_results",function(t){var n,s,a,o,r=this;t=$.extend({message:e,html:function(e){return'<div class="selectize-dropdown '+e.classNames+'"><div class="selectize-dropdown-content"><div class="no-results">'+e.message+"</div></div></div>"}},t),r.displayEmptyResultsMessage=function(){this.$empty_results_container.css("top",this.$control.outerHeight()),this.$empty_results_container.css("width",this.$control.outerWidth()),this.$empty_results_container.show(),this.$control.addClass("dropdown-active")},r.refreshOptions=(n=r.refreshOptions,function(){n.apply(r,arguments),this.hasOptions||!this.lastQuery?this.$empty_results_container.hide():this.displayEmptyResultsMessage()}),r.onKeyDown=(s=r.onKeyDown,function(e){s.apply(r,arguments),27===e.keyCode&&this.$empty_results_container.hide()}),r.onBlur=(a=r.onBlur,function(){a.apply(r,arguments),this.$empty_results_container.hide(),this.$control.removeClass("dropdown-active")}),r.setup=(o=r.setup,function(){o.apply(r,arguments),r.$empty_results_container=$(t.html($.extend({classNames:r.$input.attr("class")},t))),r.$empty_results_container.insertBefore(r.$dropdown),r.$empty_results_container.hide()})})}HESK_FUNCTIONS.getKbSearchSuggestions=function(e,t){document.form1;var n=e.val();if(""!==n&&(heskKBquery!==n||!0===heskKBfailed)){var s="q="+encodeURIComponent(n);heskKBquery=n,$.ajax({url:"suggest_articles.php",method:"POST",dataType:"json",contentType:"application/x-www-form-urlencoded",data:s,success:function(e){heskKBfailed=!1,t(e)},error:function(e,t,n){console.error(n),heskKBfailed=!0}})}setTimeout(function(){HESK_FUNCTIONS.getKbSearchSuggestions(e,t)},2e3)},HESK_FUNCTIONS.getKbTicketSuggestions=function(e,t,n){document.form1;var s=e.val(),a=t.val(),o=s+" "+a;if(""!==s&&""!==a&&(heskKBquery!==o||!0===heskKBfailed)){var r="q="+encodeURIComponent(o);heskKBquery=o,$.ajax({url:"suggest_articles.php",method:"POST",dataType:"json",contentType:"application/x-www-form-urlencoded",data:r,success:function(e){heskKBfailed=!1,n(e)},error:function(e,t,n){console.error(n),heskKBfailed=!0}})}setTimeout(function(){HESK_FUNCTIONS.getKbTicketSuggestions(e,t,n)},2e3)},HESK_FUNCTIONS.openWindow=function(e,t,n){window.open(e,"Hesk_window","height="+t+",width="+n+",menubar=0,location=0,toolbar=0,status=0,resizable=1,scrollbars=1").focus()},HESK_FUNCTIONS.suggestEmail=function(e,t,n,s){var a=document.getElementById(e).value;if(document.getElementById(t),""!==a){var o="e="+encodeURIComponent(a)+"&ef="+encodeURIComponent(e)+"&dd="+encodeURIComponent(t);s&&(o+="&am=1");var r='<div class="alert warning" id="{0}" style="display: block"><div class="alert__inner"><p><p>{1}</p><a class="link" href="javascript:" onclick="HESK_FUNCTIONS.applyEmailSuggestion(\'{0}\', \''+e+"', '{2}', '{3}')\">{4}</a> | <a class=\"link\" href=\"javascript:void(0);\" onclick=\"document.getElementById('{0}').style.display='none';\">{5}</a></p></div></div>";$.ajax({url:n?"../suggest_email.php":"suggest_email.php",method:"POST",dataType:"json",contentType:"application/x-www-form-urlencoded",data:o,success:function(e){var n=$("#"+t);n.html(""),e.length?n.show():n.hide(),$.each(e,function(){n.append(r.replace(/\{0}/g,this.id).replace(/\{1}/g,this.suggestText).replace(/\{2}/g,this.originalAddress).replace(/\{3}/g,this.formattedSuggestedEmail).replace(/\{4}/g,this.yesResponseText).replace(/\{5}/g,this.noResponseText))})},error:function(e,t,n){console.error(n)}})}},HESK_FUNCTIONS.applyEmailSuggestion=function(e,t,n,s){var a=document.getElementById(t).value,o=RegExp(n,"gi");document.getElementById(t).value=a.replace(o,s),document.getElementById(e).style.display="none"},HESK_FUNCTIONS.rate=function(e,t){if(0===e.length)return!1;var n=document.getElementById(t);$.ajax({url:e,method:"GET",dataType:"text",success:function(e){n.innerHTML=e},error:function(e,t,n){console.error(n)}})},HESK_FUNCTIONS.checkPasswordStrength=function(e,t="progressBar"){var n="!.@$#*()%~<>{}[]",s=0,a=0;HESK_FUNCTIONS._contains(e,"0123456789")>0&&(s+=10,a+=25),HESK_FUNCTIONS._contains(e,"abcdefghijklmnopqrstuvwxyz")>0&&(s+=26,a+=25),HESK_FUNCTIONS._contains(e,"ABCDEFGHIJKLMNOPQRSTUVWXYZ")>0&&(s+=26,a+=25),HESK_FUNCTIONS._contains(e,n)>0&&(s+=n.length,a+=25);var o,r=Math.pow(s,e.length)/200/2/86400/365e3,l=Math.min(Math.round(100*r),a);l<5*e.length&&(l+=5*e.length),l=Math.min(l,a);var c=document.getElementById(t);if(c.style.width=l+"%",r>1&&l>75){c.style.backgroundColor="#3bce08";return}if(r>.5&&l>50){c.style.backgroundColor="#ffd801";return}if(r>.1&&l>10){c.style.backgroundColor="orange";return}if(r<=.1||l<=10){c.style.backgroundColor="red";return}},HESK_FUNCTIONS._contains=function(e,t){for(i=0,count=0;i<e.length;i++){var n=e.charAt(i);t.indexOf(n)>-1&&count++}return count},HESK_FUNCTIONS.toggleLayerDisplay=function(e,t="block"){document.getElementById(e).style.display="none"===document.getElementById(e).style.display?t:"none"},jQuery.fn.preventDoubleSubmission=function(){return $(this).on("submit",function(e){var t=$(this);!0===t.data("submitted")?e.preventDefault():t.data("submitted",!0)}),this};